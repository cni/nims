<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

<xi:include href="master.html" />

<head>
<title>NIMS Experiments</title>

<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" py:if="False"/>
<script data-main="${tg.url('/javascript/experiments')}" src="${tg.url('/javascript/require.js')}"></script>

<style>
    .access_none { color:gray; }
    .access_anonread { }
    .access_readonly { }
    .access_readwrite { }
    .access_manage { font-weight:bold; }

    #add_experiment_iframe { width:300px; height:400px;}
    #users { width:300px; }
    #experiments { clear:left; width:300px; }

</style>
</head>

<body>
    <div id="access_dialog" title="Select access level to assign:" style="display:none">
        <select id="access_select">
        </select>
    </div>
    <h2>Experiments</h2>
    <p>This page allows you to view and make changes to access privileges.</p>

    <table id="experiments" class="scrolltable" style="visibility:hidden">
        <thead>
            <tr>
                <py:for each="col in exp_columns">
                    <th py:with="name, cls = col" class="${cls}">${name}</th>
                </py:for>
                <th>Access Level</th>
            </tr>
        </thead>
        <tbody>
            <py:for each="exp_data, exp_attr in zip(exp_data_list, exp_attr_list)">
                <tr py:attrs="exp_attr"> <!-- set id for expand queries done on rows later -->
                    <td py:for="param in exp_data">${param}</td>
                    <td></td> <!-- access level cell added on to the end -->
                </tr>
            </py:for>
        </tbody>
    </table>
    <table id="users" class="scrolltable" style="visibility:hidden">
        <thead>
            <tr>
                <py:for each="col in user_columns">
                    <th py:with="name, cls = col" class="${cls}">${name}</th>
                </py:for>
                <th>Access Level</th>
            </tr>
        </thead>
        <tbody>
            <py:for each="user_data, user_attr in zip(user_data_list, user_attr_list)">
                <tr py:attrs="user_attr"> <!-- set id for expand queries done on rows later -->
                    <td py:for="param in user_data">${param}</td>
                    <td></td> <!-- access level cell added on to the end -->
                </tr>
            </py:for>
        </tbody>
    </table>
    <iframe id="add_experiment_iframe" src="/auth/experiments/add" frameborder="no"/>
</body>
</html>
